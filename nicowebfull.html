<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>niCo AI - Security Measures</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f0f4f8 0%, #e6e6ff 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: #021a21;
    }
    .container { width: 100%; max-width: 1000px; display: flex; flex-direction: column; align-items: center; }
    header { text-align: center; margin-bottom: 30px; width: 100%; }
    .logo { display: flex; align-items: center; justify-content: center; margin-bottom: 15px; }
    .logo-icon { font-size: 2.5rem; color: #3182ce; margin-right: 10px; }
    .logo-text { font-size: 2.5rem; font-weight: bold; color: #3182ce; margin-right: 5px; }
    .logo-subtext { font-size: 1.5rem; color: #22d3ee; }
    h1 { color: #3182ce; margin-bottom: 10px; font-size: 2.2rem; }
    .subtitle { color: #6b7280; font-size: 1.1rem; max-width: 600px; margin: 0 auto 20px; }
    .language-selector { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px; width: 100%; }
    .lang-btn {
      background: white;
      border: 2px solid #3182ce;
      color: #3182ce;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .lang-btn:hover { background: #3182ce; color: white; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .lang-btn.active { background: #3182ce; color: white; }
    .chat-container { width: 100%; display: flex; flex-direction: column; }
    .chatbox {
      width: 100%;
      height: 600px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .chat-header {
      background: linear-gradient(to right, #3182ce, #7cb5d8);
      color: white;
      padding: 16px 20px;
      font-weight: bold;
      text-align: center;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chat-title { display: flex; align-items: center; gap: 8px; }
    .status-dot { width: 8px; height: 8px; background: #10b981; border-radius: 50%; }
    .chat-messages {
      flex: 1;
      padding: 20px;
      font-size: 14px;
      overflow-y: auto;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .message { margin: 0; padding: 12px 16px; border-radius: 18px; max-width: 80%; line-height: 1.4; animation: fadeIn 0.3s ease; position: relative; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .user-msg { background: #4693e5; color: white; align-self: flex-end; border-bottom-right-radius: 6px; }
    .nico-msg { background: #f3f4f6; color: #1f2937; align-self: flex-start; border-bottom-left-radius: 6px; }
    .msg-info { font-size: 12px; opacity: 0.7; margin-bottom: 4px; }
    .typing-indicator { display: none; background: #f3f4f6; color: #1f2937; align-self: flex-start; border-bottom-left-radius: 6px; padding: 12px 16px; margin: 5px 0; }
    .typing-indicator span { height: 8px; width: 8px; float: left; margin: 0 1px; background-color: #9E9EA1; display: block; border-radius: 50%; opacity: 0.4; }
    .typing-indicator span:nth-of-type(1) { animation: typing 1s infinite; }
    .typing-indicator span:nth-of-type(2) { animation: typing 1s 0.33s infinite; }
    .typing-indicator span:nth-of-type(3) { animation: typing 1s 0.66s infinite; }
    @keyframes typing { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    .suggestion-chips { display: flex; flex-wrap: wrap; gap: 10px; padding: 15px; background: white; border-top: 1px solid #e5e7eb; }
    .chip { background: #eef2ff; color: #4693e5; padding: 8px 16px; border-radius: 20px; font-size: 14px; cursor: pointer; transition: all 0.3s ease; }
    .chip:hover { background: #3182ce; color: white; transform: translateY(-2px); }
    .chat-input { display: flex; border-top: 1px solid #e5e7eb; padding: 15px; background: white; }
    .chat-input input {
      flex: 1;
      border: 1px solid #e5e7eb;
      padding: 12px 18px;
      font-size: 14px;
      border-radius: 20px;
      outline: none;
      transition: border-color 0.3s;
    }
    .chat-input input:focus { border-color: #4f46e5; }
    .chat-input button {
      border: none;
      background: #4f46e5;
      color: white;
      padding: 12px 20px;
      margin-left: 10px;
      cursor: pointer;
      font-weight: bold;
      border-radius: 20px;
      transition: background 0.3s;
    }
    .chat-input button:hover { background: #4338ca; transform: translateY(-2px); }
    .api-status {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.2);
    }
    .api-status.connected { background: rgba(16, 185, 129, 0.2); color: #10b981; }
    .api-status.disconnected { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
    .error-message {
      background: #fef2f2;
      color: #dc2626;
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
      border: 1px solid #fecaca;
      display: none;
    }
    
    /* Security Information Panel */
    .security-container {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      display: none;
    }
    .security-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    .security-title {
      font-weight: bold;
      color: #3182ce;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .close-security {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #6b7280;
    }
    .security-features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-bottom: 15px;
    }
    .security-card {
      background: #f0f4f8;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #3182ce;
    }
    .security-icon {
      font-size: 1.5rem;
      color: #3182ce;
      margin-bottom: 10px;
    }
    .security-card-title {
      font-weight: bold;
      margin-bottom: 8px;
      color: #1f2937;
    }
    .security-card-desc {
      font-size: 0.9rem;
      color: #6b7280;
    }
    .security-certificates {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 15px 0;
      justify-content: center;
    }
    .cert-badge {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #f0f4f8;
      padding: 10px;
      border-radius: 8px;
      width: 100px;
    }
    .cert-icon {
      font-size: 2rem;
      color: #3182ce;
      margin-bottom: 5px;
    }
    .cert-name {
      font-size: 0.8rem;
      text-align: center;
      color: #6b7280;
    }
    .privacy-link {
      text-align: center;
      margin-top: 15px;
    }
    .privacy-link a {
      color: #3182ce;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }
    .privacy-link a:hover {
      text-decoration: underline;
    }
    
    footer { margin-top: 30px; text-align: center; color: #6b7280; font-size: 0.9rem; }
    @media (max-width: 768px) { 
      .chatbox { height: 500px; } 
      .language-selector { gap: 5px; } 
      .lang-btn { padding: 8px 12px; font-size: 14px; } 
      .message { max-width: 90%; } 
      .security-features { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <i class="logo-icon fas fa-headset"></i>
        <div class="logo-text">niCo</div>
        <div class="logo-subtext">AI</div>
      </div>
      <h1>Enhanced Multilingual Telkom Support</h1>
      <p class="subtitle">Get intelligent assistance in your preferred language. Powered by AI for better understanding and responses.</p>
      
      <div class="language-selector">
        <button class="lang-btn active" onclick="changeLanguage('english', this)">
          <i class="fas fa-language"></i> English
        </button>
        <button class="lang-btn" onclick="changeLanguage('afrikaans', this)">
          <i class="fas fa-language"></i> Afrikaans
        </button>
        <button class="lang-btn" onclick="changeLanguage('zulu', this)">
          <i class="fas fa-language"></i> isiZulu
        </button>
        <button class="lang-btn" onclick="changeLanguage('sotho', this)">
          <i class="fas fa-language"></i> Sesotho
        </button>
        <button class="lang-btn" onclick="changeLanguage('setswana', this)">
          <i class="fas fa-language"></i> Setswana
        </button>
        <button class="lang-btn" onclick="changeLanguage('sepedi', this)">
          <i class="fas fa-language"></i> Sepedi
        </button>
      </div>
    </header>
    
    <div class="chat-container">
      <div class="chatbox">
        <div class="chat-header">
          <div class="chat-title">
            <span class="status-dot"></span>
            niCo AI Assistant
          </div>
          <span id="current-language">English</span>
          <div class="api-status connected" id="apiStatus">API Secured</div>
        </div>
        
        <div class="error-message" id="errorMessage"></div>
        
        <!-- Security Information Panel -->
        <div class="security-container" id="securityContainer">
          <div class="security-header">
            <div class="security-title">
              <i class="fas fa-shield-alt"></i>
              Security & Privacy Protection
            </div>
            <button class="close-security" onclick="closeSecurity()">&times;</button>
          </div>
          
          <div class="security-features">
            <div class="security-card">
              <div class="security-icon">
                <i class="fas fa-lock"></i>
              </div>
              <div class="security-card-title">End-to-End Encryption</div>
              <div class="security-card-desc">All conversations are encrypted with AES-256 encryption, ensuring your data remains private and secure.</div>
            </div>
            
            <div class="security-card">
              <div class="security-icon">
                <i class="fas fa-user-shield"></i>
              </div>
              <div class="security-card-title">Authentication</div>
              <div class="security-card-desc">Multi-factor authentication and strict access controls prevent unauthorized access to user data.</div>
            </div>
            
            <div class="security-card">
              <div class="security-icon">
                <i class="fas fa-database"></i>
              </div>
              <div class="security-card-title">Data Protection</div>
              <div class="security-card-desc">User data is anonymized and stored in secure, SOC 2 compliant data centers with regular security audits.</div>
            </div>
            
            <div class="security-card">
              <div class="security-icon">
                <i class="fas fa-shield-virus"></i>
              </div>
              <div class="security-card-title">Network Security</div>
              <div class="security-card-desc">Advanced firewalls, intrusion detection systems, and DDoS protection safeguard our infrastructure.</div>
            </div>
          </div>
          
          <div class="security-certificates">
            <div class="cert-badge">
              <i class="cert-icon fas fa-certificate"></i>
              <div class="cert-name">SOC 2 Compliant</div>
            </div>
            <div class="cert-badge">
              <i class="cert-icon fas fa-shield-alt"></i>
              <div class="cert-name">GDPR Ready</div>
            </div>
            <div class="cert-badge">
              <i class="cert-icon fas fa-lock"></i>
              <div class="cert-name">AES-256 Encryption</div>
            </div>
            <div class="cert-badge">
              <i class="cert-icon fas fa-check-double"></i>
              <div class="cert-name">ISO 27001</div>
            </div>
          </div>
          
          <div class="privacy-link">
            <a href="#" onclick="showPrivacyPolicy()">
              <i class="fas fa-file-alt"></i> View our complete Privacy Policy
            </a>
          </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
          <p class="message nico-msg">
            <div class="msg-info">niCo • Just now</div>
            Hello 👋, I'm niCo, your enhanced multilingual Telkom assistant. I'm now powered by AI for better understanding and responses. How can I help you today?
          </p>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
          <span></span>
          <span></span>
          <span></span>
        </div>
        
        <div class="suggestion-chips">
          <div class="chip" onclick="askQuestion('How do I check my data balance?')">Check data balance</div>
          <div class="chip" onclick="askQuestion('How to buy data bundles?')">Buy data bundles</div>
          <div class="chip" onclick="askQuestion('Contact customer care')">Contact customer care</div>
          <div class="chip" onclick="askQuestion('Why is my internet slow?')">Internet issues</div>
          <div class="chip" onclick="askQuestion('Tell me about Telkom FreeMe')">FreeMe packages</div>
          <div class="chip" onclick="askQuestion('How to cancel my contract?')">Contract cancellation</div>
          <div class="chip" onclick="showSecurityInfo()">
            <i class="fas fa-shield-alt"></i> Security info
          </div>
        </div>
        
        <div class="chat-input">
          <input type="text" id="userInput" placeholder="Type your Telkom question..." onkeypress="handleKeyPress(event)">
          <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i> Send</button>
        </div>
      </div>
    </div>
    
    <footer>
      <p>niCo AI Chatbot • Enhanced Multilingual Telkom Support • Powered by AI</p>
      <p>© 2024 niCo AI. All rights reserved.</p>
    </footer>
  </div>

  <script>
    let currentLanguage = 'english';
    let apiKey = ''; // Set your OpenAI API key here
    let useAPI = true;
    
    // Language configurations
    const languages = {
      english: { name: 'English', code: 'en' },
      afrikaans: { name: 'Afrikaans', code: 'af' },
      zulu: { name: 'isiZulu', code: 'zu' },
      sotho: { name: 'Sesotho', code: 'st' },
      setswana: { name: 'Setswana', code: 'tn' },
      sepedi: { name: 'Sepedi', code: 'nso' }
    };
    
    // Local fallback responses
    const localResponses = {
      english: {
        greeting: "Hello! 👋 How can I assist you with Telkom today?",
        default: "I'm sorry, I didn't quite catch that. Could you try asking differently?",
        whatIsTelkom: "Telkom is a South African telecommunications company providing broadband, mobile, and fixed-line services.",
        airtimeBalance: "You can check your airtime balance via USSD *180# or the Telkom app.",
        dataBalance: "Check your data balance on *180# or via the MyTelkom app.",
        buyData: "You can buy data bundles via the MyTelkom app or USSD *180#.",
        dataIssues: "If your data has paused or disappeared, try restarting your phone, or contact Telkom support.",
        customerCare: "You can reach Telkom customer care at 10210 from a Telkom line.",
        freeme: "Telkom FreeMe is a package that allows you to call, SMS, or use data for free at certain times.",
        slowInternet: "Slow internet may be caused by network congestion. Restart your router or contact Telkom support.",
        simRouter: "You can use your Telkom SIM in any compatible router after activation.",
        cancelContract: "To cancel your Telkom contract, please contact customer care directly.",
        securityInfo: "Telkom takes security seriously. We use end-to-end encryption, multi-factor authentication, and regular security audits to protect your data. Would you like more detailed security information?"
      },
      afrikaans: {
        greeting: "Hallo! 👋 Hoe kan ek jou vandag help met Telkom?",
        default: "Ek is jammer, ek het dit nie reg verstaan nie. Kan jy dit anders probeer vra?",
        whatIsTelkom: "Telkom is 'n Suid-Afrikaanse telekommunikasiemaatskappy wat breëband, mobiele en vaste lyn dienste verskaf.",
        airtimeBalance: "Jy kan jou lugtydbalans kontroleer via USSD *180# of die Telkom app.",
        dataBalance: "Kontroleer jou databalans op *180# of via die MyTelkom app.",
        buyData: "Jy kan databundels koop via die MyTelkom app of USSD *180#.",
        dataIssues: "As jou data gepauseer of verdwyn het, probeer om jou foon te herbegin, of kontak Telkom ondersteuning.",
        customerCare: "Jy kan Telkom kliëntediens bereik op 10210 vanaf 'n Telkom lyn.",
        freeme: "Telkom FreeMe is 'n pakket wat jou toelaat om gratis te bel, SMS of data te gebruik op sekere tye.",
        slowInternet: "Stadige internet kan veroorsaak word deur netwerkopeenhoping. Herbegin jou router of kontak Telkom ondersteuning.",
        simRouter: "Jy kan jou Telkom SIM in enige versoenbare router gebruik na aktivering.",
        cancelContract: "Om jou Telkom kontrak te kanselleer, kontak asseblief kliëntediens direk.",
        securityInfo: "Telkom neem sekuriteit ernstig op. Ons gebruik end-to-end enkripsie, multi-faktor authenticatie en gereelde sekuriteitoudits om jou data te beskerm. Wil u meer gedetailleerde sekuriteitsinligting hê?"
      },
      zulu: {
        greeting: "Sawubona! 👋 Ngingakusiza kanjani namhlanje ngeTelkom?",
        default: "Ngiyaxolisa, angikuzwanga kahle lokho. Ungakuzama ukubuza ngendlela ehlukile?",
        whatIsTelkom: "ITelkom yinkampani yezokuxhumana yaseNingizimu Afrika enikeza izinsizakalo ze-broadband, ezomakhalekhukhwini kanye nemigqa eqinile.",
        airtimeBalance: "Ungabheka ibhalansi yakho ye-airtime nge-USSD *180# noma i-app kaTelkom.",
        dataBalance: "Bheka ibhalansi yakho yedatha ku-*180# noma nge-MyTelkom app.",
        buyData: "Ungathenga amabhandele edatha nge-MyTelkom app noma i-USSD *180#.",
        dataIssues: "Uma idatha yakho iphazile noma inyamalale, zama ukuvula kabusha ifoni yakho, noma uxhumane noTelkom.",
        customerCare: "Ungafinyelela uTelkom customer care ku-10210 kusuka kulayini kaTelkom.",
        freeme: "ITelkom FreeMe iphakheji ekukuvumela ukuthi ufone, u-SMS noma usebenzise idatha mahhala ngezikhathi ezithile.",
        slowInternet: "I-internet esheshayo ingabangelwa ukugcwala kwenethiwekhi. Vula kabusha i-router yakho noma uxhumane noTelkom.",
        simRouter: "Ungasebenzisa i-SIM yakho kaTelkom kunoma iyiphi i-router evumelana nayo ngemuva kokusebenza.",
        cancelContract: "Ukuze ukhanseli inkontileka yakho kaTelkom, sicela uxhumane ne-customer care ngqo.",
        securityInfo: "ITelkom ithatha ukuphepha ngokujulile. Sisebenzisa ukubethelwa kokugcina ukuya kokugcina, ukuqinisekiswa kwe-multi-factor, nokucwanjwa kokuphepha okujwayelekile ukuvikela idatha yakho. Ungathanda ulwazi oluningiliziwe lokuphepha?"
      }
    };
    
    // Initialize the system
    function init() {
      checkAPIStatus();
      updateLanguageDisplay();
    }
    
    // Check API connectivity
    async function checkAPIStatus() {
      const statusElement = document.getElementById('apiStatus');
      if (!apiKey) {
        statusElement.textContent = 'No API Key';
        statusElement.className = 'api-status disconnected';
        useAPI = false;
        return;
      }
      
      try {
        const response = await fetch('https://api.openai.com/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: 'gpt-3.5-turbo',
            messages: [{ role: 'user', content: 'test' }],
            max_tokens: 10
          })
        });
        
        if (response.ok) {
          statusElement.textContent = 'API Secured';
          statusElement.className = 'api-status connected';
          useAPI = true;
        } else {
          throw new Error('API not responding');
        }
      } catch (error) {
        statusElement.textContent = 'API Offline';
        statusElement.className = 'api-status disconnected';
        useAPI = false;
        console.log('Using local responses due to API unavailability');
      }
    }
    
    // Change language function
    function changeLanguage(lang, btn) {
      currentLanguage = lang;
      document.getElementById('current-language').textContent = languages[lang].name;
      
      document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      const chatMessages = document.getElementById("chatMessages");
      const now = new Date();
      const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      const greetingMsg = document.createElement("p");
      greetingMsg.className = "message nico-msg";
      greetingMsg.innerHTML = `<div class="msg-info">niCo • ${timeString}</div>${localResponses[lang]?.greeting || localResponses['english'].greeting}`;
      chatMessages.appendChild(greetingMsg);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    
    // Handle key press
    function handleKeyPress(event) {
      if (event.key === "Enter") sendMessage();
    }
    
    // Ask question from suggestion chips
    function askQuestion(question) {
      document.getElementById('userInput').value = question;
      sendMessage();
    }
    
    // Send message function
    async function sendMessage() {
      const input = document.getElementById("userInput");
      const message = input.value.trim();
      if (!message) return;
      
      const chatMessages = document.getElementById("chatMessages");
      const now = new Date();
      const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      // Add user message
      const userMsg = document.createElement("p");
      userMsg.className = "message user-msg";
      userMsg.innerHTML = `<div class="msg-info">You • ${timeString}</div>${message}`;
      chatMessages.appendChild(userMsg);
      input.value = "";
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      // Show typing indicator
      const typingIndicator = document.getElementById("typingIndicator");
      typingIndicator.style.display = "block";
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      try {
        let response;
        if (useAPI && apiKey) {
          response = await generateAPIResponse(message);
        } else {
          response = await generateLocalResponse(message);
        }
        
        // Hide typing indicator and show response
        setTimeout(() => {
          typingIndicator.style.display = "none";
          displayResponse(response, timeString);
          
          // If the message is about security, show the security info panel
          if (message.toLowerCase().includes('security') || 
              message.toLowerCase().includes('privacy') ||
              message.toLowerCase().includes('data protection') ||
              message.toLowerCase().includes('encryption')) {
            setTimeout(showSecurityInfo, 500);
          }
        }, 1000 + (Math.random() * 1000));
        
      } catch (error) {
        typingIndicator.style.display = "none";
        showError('Failed to generate response. Using fallback.');
        const fallbackResponse = await generateLocalResponse(message);
        displayResponse(fallbackResponse, timeString);
      }
    }
    
    // Generate response using API
    async function generateAPIResponse(userMessage) {
      const systemPrompt = `You are niCo, a helpful Telkom (South African telecommunications company) customer service AI assistant. 
      Respond in ${languages[currentLanguage].name} language. 
      Be helpful, accurate, and provide practical solutions for Telkom-related queries about:
      - Data and airtime issues
      - Network problems and coverage
      - Customer service
      - Billing and contracts
      - Technical support
      - Security and privacy
      
      Keep responses concise but informative. If you don't know something specific about Telkom, say so and suggest contacting customer care.`;
      
      const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          model: 'gpt-3.5-turbo',
          messages: [
            { role: 'system', content: systemPrompt },
            { role: 'user', content: userMessage }
          ],
          max_tokens: 200,
          temperature: 0.7
        })
      });
      
      if (!response.ok) {
        throw new Error('API request failed');
      }
      
      const data = await response.json();
      return data.choices[0].message.content;
    }
    
    // Generate local fallback response
    async function generateLocalResponse(userMessage) {
      const lowerMessage = userMessage.toLowerCase();
      let responseKey = 'default';
      
      // Pattern matching for different query types
      if (/what.*telkom|telkom.*is|about.*telkom/.test(lowerMessage)) responseKey = 'whatIsTelkom';
      else if (/(airtime.*balance|check.*airtime|airtime.*left)/.test(lowerMessage)) responseKey = 'airtimeBalance';
      else if (/(data.*balance|check.*data|how.*much.*data|data.*left)/.test(lowerMessage)) responseKey = 'dataBalance';
      else if (/(buy.*data|purchase.*data|data.*bundle|get.*more.*data)/.test(lowerMessage)) responseKey = 'buyData';
      else if (/(data.*pause|data.*disappear|data.*issue|missing.*data)/.test(lowerMessage)) responseKey = 'dataIssues';
      else if (/(customer.*care|contact.*support|help.*line|support.*number)/.test(lowerMessage)) responseKey = 'customerCare';
      else if (/(freeme|free.*me)/.test(lowerMessage)) responseKey = 'freeme';
      else if (/(slow.*internet|internet.*slow|network.*slow|why.*slow)/.test(lowerMessage)) responseKey = 'slowInternet';
      else if (/(sim.*router|router.*sim|unlock.*router|other.*router)/.test(lowerMessage)) responseKey = 'simRouter';
      else if (/(cancel.*contract|terminate.*contract|end.*contract)/.test(lowerMessage)) responseKey = 'cancelContract';
      else if (/(security|privacy|data.*protection|encryption)/.test(lowerMessage)) responseKey = 'securityInfo';
      else if (/(hello|hi|hey|greetings)/.test(lowerMessage)) responseKey = 'greeting';
      
      const response = localResponses[currentLanguage]?.[responseKey] || localResponses['english'][responseKey];
      return response;
    }
    
    // Display response in chat
    function displayResponse(response, timeString) {
      const chatMessages = document.getElementById("chatMessages");
      const reply = document.createElement("p");
      reply.className = "message nico-msg";
      reply.innerHTML = `<div class="msg-info">niCo • ${timeString}</div>${response}`;
      chatMessages.appendChild(reply);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    
    // Show error message
    function showError(message) {
      const errorElement = document.getElementById('errorMessage');
      errorElement.textContent = message;
      errorElement.style.display = 'block';
      setTimeout(() => {
        errorElement.style.display = 'none';
      }, 5000);
    }
    
    // Update language display
    function updateLanguageDisplay() {
      document.getElementById('current-language').textContent = languages[currentLanguage].name;
    }
    
    // Show security information panel
    function showSecurityInfo() {
      const securityContainer = document.getElementById('securityContainer');
      securityContainer.style.display = 'block';
      
      // Scroll to the security container
      securityContainer.scrollIntoView({ behavior: 'smooth' });
    }
    
    // Close security information panel
    function closeSecurity() {
      document.getElementById('securityContainer').style.display = 'none';
    }
    
    // Show privacy policy (placeholder function)
    function showPrivacyPolicy() {
      const chatMessages = document.getElementById("chatMessages");
      const now = new Date();
      const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      
      const policyMsg = document.createElement("p");
      policyMsg.className = "message nico-msg";
      policyMsg.innerHTML = `<div class="msg-info">niCo • ${timeString}</div>Our complete Privacy Policy is available at telkom.co.za/privacy. It details how we collect, use, and protect your personal information in compliance with South African privacy laws.`;
      chatMessages.appendChild(policyMsg);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      
      closeSecurity();
    }
    
    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
